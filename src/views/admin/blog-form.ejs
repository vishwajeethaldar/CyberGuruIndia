<%- include('../partials/head', { title }) %>
<%- include('../partials/navbar') %>
<%- include('../partials/admin-submenu') %>
<%- include('../partials/alerts') %>

<main class="container py-4" style="max-width: 900px;">
  <h1 class="h3 mb-3"><%= blog ? 'Edit Blog' : 'Add Blog' %></h1>
  <form method="POST" action="<%= action %>" enctype="multipart/form-data" class="card card-body shadow-sm">
    <div class="mb-3">
      <label class="form-label">Title</label>
      <input class="form-control" type="text" name="title" value="<%= blog ? blog.title : '' %>" required maxlength="160" />
    </div>
    <div class="mb-3">
      <label class="form-label">Content</label>
      <textarea class="form-control" name="content" rows="8" required maxlength="10000"><%= blog ? blog.content : '' %></textarea>
    </div>
    <div class="mb-3">
      <label class="form-label">Thumbnail (optional)</label>
      <input class="form-control" type="file" name="thumbnail" accept="image/*" />
    </div>
    <% if (blog && blog.slug) { %>
      <div class="mb-3">
        <label class="form-label">Share</label>
        <button class="btn btn-outline-secondary js-copy-share" type="button" data-share-url="<%= siteBaseUrl %>/blogs/<%= blog.slug %>">ðŸ”— Share</button>
      </div>
    <% } %>
    <div class="form-check mt-2">
      <input class="form-check-input" type="checkbox" name="discussionEnabled" id="blogDiscussionEnabled" <%= !blog || blog.discussionEnabled ? 'checked' : '' %> />
      <label class="form-check-label" for="blogDiscussionEnabled">Enable discussion</label>
    </div>
    <div class="mt-4 d-flex gap-2">
      <button class="btn btn-primary" type="submit">Save</button>
      <a class="btn btn-outline-secondary" href="/admin/blogs">Cancel</a>
    </div>
  </form>
</main>

<%- include('../partials/footer') %>
